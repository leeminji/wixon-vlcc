<!DOCTYPE HTML>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<title>VLCCLAB Dashboard - SELINE</title>
	<link rel="shortcut icon" type="image/x-icon" href="../_public/favicon.ico" />
	<!-- stylesheet -->
	<link href="../_public/vendor/scrollbar/scrollbar.css" rel="stylesheet" type="text/css" />
	<link href="../_public/css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div class="loading" id="loading"><div class="img"><span class="skip">Loading...</span></div></div>
	<!-- Layout__Allwrap : class = active_submenu : SideMenu 있는경우에만 class 추가 -->
	<div class="Layout__Allwrap" id="LayoutAllwrap">
		<!-- header -->
		<header class="Layout__header">
			<!-- Layout__menu -->
			<div class="Layout__menu">
				<div class="TotalMenu__tooltip" id="totalMenuTooltip"></div>
				<!-- TotalMenu -->
				<div class="TotalMenu black" id="totalMenu">
					<div class="js-scrollbar">
						<div class="TotalMenu__top">				
							<a href="javascript:;" class="TotalMenu__button_menu" id="totalMenuOpen"><span class="icon icon_menu"></span></a>
							<div class="AdminState">
								<a href="#" title="" class="AdminState__state">
									<span class="icon icon_admin"></span> <span class="txt">ADMIN LOGOUT</span>
								</a>
							</div>
							<a href="javascript:;" class="TotalMenu__button_close" title="close" id="totalMenuClose"><span class="icon icon_close"></span></a>
						</div>
						<!-- TotalMenu__listArea -->
						<nav class="TotalMenu__listArea">
							<h1 class="skip">전체메뉴</h1>
							<ul class="clear TotalMenu__list" id="totalMenuList">
								<li data-title="Setting">
									<a href="#">
										<span class="icon icon_setting on"></span>
										<span class="txt">Setting</span>
									</a>
								</li>
								<li data-title="Dashbaord">
									<a href="#">
										<span class="icon icon_moniter on"></span>
										<span class="txt">Dashbaord</span>
									</a>
									<ul class="clear TotalMenu__sublist">
										<li><a href="#"><span class="txt">Vessel movement</span></a></li>
										<li><a href="#"><span class="txt">ship register</span></a></li>
										<li><a href="#"><span class="txt">port register</span></a></li>
										<li><a href="#"><span class="txt">another name management</span></a></li>
										<li><a href="#"><span class="txt">general setting</span></a></li>
									</ul>
								</li>
								<li data-title="Map">
									<a href="3_map.html">
										<span class="icon icon_location on"></span>
										<span class="txt">Map</span>
									</a>
								</li>
                                <li data-title="Tools">
									<a href="#">
										<span class="icon icon_ruler on"></span>
										<span class="txt">Tools</span>
									</a>
									<ul class="clear TotalMenu__sublist">
										<li><a href=""><span class="txt">Vessel</span></a></li>
										<li><a href=""><span class="txt">Distance</span></a></li>
										<li><a href=""><span class="txt">TCE CALCULATOR</span></a></li>
										<li><a href=""><span class="txt">FLEET LIBRARY</span></a></li>
										<li><a href=""><span class="txt">RESEARCH</span></a></li>
										<li><a href=""><span class="txt">MY FLEET</span></a></li>
									</ul>					
								</li>
								<li data-title="Spot Charter">
									<a href="4_spot_charter.html">
										<span class="icon icon_compass on"></span>
										<span class="txt">Spot Charter</span>
									</a>
									<ul class="clear TotalMenu__sublist">
										<li><a href=""><span class="txt">Position list</span></a></li>
										<li><a href=""><span class="txt">Nowcast</span></a></li>
										<li><a href=""><span class="txt">Pattern</span></a></li>
										<li><a href=""><span class="txt">Analysis</span></a></li>
									</ul>
								</li>
								<li data-title="Market Report" class="active">
									<a href="#">
										<span class="icon icon_doc on"></span>
										<span class="txt">Market Report</span>
									</a>
									<ul class="clear TotalMenu__sublist">
										<li class="active"><a href=""><span class="txt">Freight Assessment</span></a></li>
										<li><a href=""><span class="txt">Fleet Study</span></a></li>
										<li><a href=""><span class="txt">Tonne Miles</span></a></li>
									</ul>					
								</li>
								<li data-title="Oil">
									<a href="#">
										<span class="icon icon_water on"></span>
										<span class="txt">OIL</span>
									</a>
									<ul class="clear TotalMenu__sublist">
										<li><a href=""><span class="txt">Flow</span></a></li>
										<li><a href=""><span class="txt">Inventory</span></a></li>
										<li><a href=""><span class="txt">Refinery</span></a></li>
									</ul>					
								</li>
								<li data-title="Mailing">
									<a href="9_mail.html">
										<span class="icon icon_mail on"></span>
										<span class="txt">Mailing</span>
									</a>
								</li>
							</ul>
						</nav>
						<!-- //TotalMenu__listArea -->					
					</div>
				</div>
				<!-- //TotalMenu -->
			</div>
			<!-- //Layout__menu -->
		</header>
		<!-- //header -->
		<!-- Layout__container -->
		<div class="Layout__container bgStyle_01">
			<div class="Layout__topContent">
				<div class="TopLogin white">
					<a href="0_index.html" class="TopLogin__state"><span class="icon icon_admin"></span><span class="txt font_condensed">ADMIN LOGOUT</span></a>
				</div>
				<div class="TopLogo"><a href="0_index.html" class="link">메인으로이동</a><h1 class="skip">VLCCLAB</h1></div>
				<!-- TopClock -->
				<div class="TopClock">
					<div class="TopClock__inner">
						<div class="time"><span>04:07 UTC</span></div>
						<div class="date"><span>13 May</span></div>
					</div>
				</div>
				<!-- //TopClock -->				
				<!-- TopTitle -->
				<div class="TopTitle"><span>MARKET - Freight Assessment</span></div>
				<!-- //TopTitle -->				
			</div>			
			<!-- MarketArea -->
			<section class="Layout__content MarketArea">
				<h1 class="skip">Market Contents</h1>	
				<div class="js-scrollbar">
					<!-- 
						가로스크롤 생기고 차트가 옆으로 추가되는 경우 ::
						옆에 차트가 있다면 다 포함하는 div에 isChartList 클래스 필요합니다. ( isChartList inner클래스의 마진값 없애는 클래스 - 마진값 존재시 살짝씩 간격이 틀어집니다.)
						
						추가되는 차트 부모 엘리먼트로 chartList,  chartList_inner 필요합니다.
						<canvas> 속성 data-scale로 넓이 조절합니다.
						data-scale=1 기본사이즈 1 일 경우 속성 넣어도 되고 빼도 됩니다.
						가로가 길어질경우 scale로 조절합니다.
					-->						
					<div class="Layout__content__inner pb10 isChartList">
						<div class="Layout_row">
							<div class="Layout_chartArea col6">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>
									<!-- chartList -->
									<div class="chartList">
										<!-- chartList_inner -->
										<div class="chartList_inner">
											<div class="inner">
												<div id="chart1_legend" class="chartjs-legend"></div>
												<div id="chart1_title" class="chartjs-title center middle"><span>Spot Freight-month</span></div>
												<canvas id="chart1" class="chartjs-canvas" data-scale=1.5></canvas>
											</div>
											<div class="inner">
												<div id="chart1_1_legend" class="chartjs-legend"></div>
												<div id="chart1_1_title" class="chartjs-title center middle"><span>Spot Freight-Day</span></div>
												<canvas id="chart1_1" class="chartjs-canvas" data-scale=1.3></canvas>
											</div>
											<div class="inner">
												<div id="chart1_2_legend" class="chartjs-legend"></div>
												<div id="chart1_2_title" class="chartjs-title center middle"><span>Spot Freight-Year</span></div>
												<canvas id="chart1_2" class="chartjs-canvas" data-scale=1></canvas>
											</div>
										</div>
										<!-- chartList_inner -->
									</div>
									<!-- //chartList -->
								</div>
							</div>
							<div class="Layout_chartArea col6">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>
									<div class="inner">
									<div id="chart2_legend" class="chartjs-legend"></div>
									<div id="chart2_title" class="chartjs-title center middle"><span>VLCC - TD3 FFAs - $k/day</span></div>
									<canvas id="chart2" class="chartjs-canvas"></canvas>
									</div>
								</div>
							</div>
						</div>
						<div class="Layout_row">
							<div class="Layout_chartArea col6">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>	
									<!-- chartList -->
									<div class="chartList">
										<!-- chartList_inner -->
										<div class="chartList_inner">	
											<div class="inner">
												<div id="chart3_legend" class="chartjs-legend"></div>
												<div id="chart3_title" class="chartjs-title center middle"><span>Bunker Price</span></div>
												<canvas id="chart3" class="chartjs-canvas" data-scale=1.2></canvas>
											</div>
											<div class="inner">
												<div id="chart3_2_legend" class="chartjs-legend"></div>
												<div id="chart3_2_title" class="chartjs-title center middle"><span>Asset price</span></div>
												<canvas id="chart3_2" class="chartjs-canvas"></canvas>
											</div>	
										</div>
										<!-- //chartList_inner -->
									</div>
									<!-- //chartList -->
								</div>
							</div>
							<div class="Layout_chartArea col6">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>
									<div class="inner">
									<div id="chart4_legend" class="chartjs-legend"></div>
									<div id="chart4_title" class="chartjs-title center middle"><span>Asset price</span></div>
									<canvas id="chart4" class="chartjs-canvas"></canvas>
									</div>
								</div>
							</div>
						</div>
						<div class="Layout_row">
							<div class="Layout_chartArea">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" onclick="uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>
									<!-- chartList -->
									<div class="chartList">
										<!-- chartList_inner -->
										<div class="chartList_inner">		
											<div class="inner">
												<div id="chart5_legend" class="chartjs-legend"></div>
												<div id="chart5_title" class="chartjs-title middle"><span>Tanker scrap price</span></div>
												<canvas id="chart5" class="chartjs-canvas"></canvas>
											</div>
										</div>
										<!-- //chartList_inner -->
									</div>
									<!-- //chartList -->
								</div>
							</div>
							<div class="Layout_chartArea">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" onclick="uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>
									<!-- chartList -->
									<div class="chartList">
										<!-- chartList_inner -->
										<div class="chartList_inner">	
											<div class="inner">
												<div id="chart6_legend" class="chartjs-legend"></div>
												<div id="chart6_title" class="chartjs-title center"><span>vlcc premium over suezmax</span><br><span class="small">quarterly average</span></div>
												<div class="chartjs-etc"><span>TD3/TD3c vs. TDS $k/day</span></div>
												<canvas id="chart6" class="chartjs-canvas"></canvas>
											</div>	
											<div class="inner">
												<div id="chart6_1_legend" class="chartjs-legend"></div>
												<div id="chart6_1_title" class="chartjs-title center"><span>vlcc premium over suezmax</span><br><span class="small">quarterly average</span></div>
												<div class="chartjs-etc"><span>TD3/TD3c vs. TDS $k/day</span></div>
												<canvas id="chart6_1" class="chartjs-canvas" data-scale="2"></canvas>
											</div>	
										</div>
										<!-- //chartList_inner -->
									</div>
									<!-- //chartList -->
								</div>
							</div>
							<div class="Layout_chartArea">
								<div class="BoxArea01">
									<a href="javascript:uiSettingPopup.open('DataSetting');" class="DataSetting__button"><span>관리자수정</span></a>
									<div class="inner">
									<div class="chartjs-tab" id="chart7_tab">
										<a href="javascript:;" data-category='LSFO'>LSFO</a>
										<a href="javascript:;" data-category='HSFO'>HSFO</a>
										<a href="javascript:;" data-category='SPREAD'>SPREAD</a>
									</div>		
									<div id="chart7_legend" class="chartjs-legend"></div>
									<div id="chart7_title" class="chartjs-title middle"><span>Bunker Price</span></div>
									<canvas id="chart7" class="chartjs-canvas"></canvas>
									</div>
								</div>	
							</div>
						</div>
						<div class="pt5"></div>
					</div>
				</div>
			</section>
			<!-- //MarketArea -->
		</div>
		<!-- //Layout__container -->
	
		<!-- DataSetting : active 클래스로 on off 제어 -->
		<div class="DataSetting" id="DataSetting">
			<div class="DataSetting__inner font_condensed">
				<a href="javascript:;" onclick="uiSettingPopup.close('DataSetting');" class="DataSetting__button_close"><span class="icon icon_close"></span><span class="skip">닫기</span></a>
				<h2 class="DataSetting__title"><span>subject title</span></h2>
				<div class="DataSetting__content">
					<div class="DataSetting__form">
						<div class="checkform line">
							<div class="text">111111</div>
							<div class="check">
								<label class="SlideCheckbox"><input type="checkbox" /><span></span></label>
							</div>
						</div>
						<div class="checkform">
							<div class="text">222222</div>
							<div class="check">
								<label class="SlideCheckbox"><input type="checkbox" checked /><span></span></label>
							</div>
						</div>
						<div class="divider"></div>
						<div class="textform"><input type="text" placeholder="1111"></div>
						<div class="textform"><input type="text" placeholder="2222"></div>
						<div class="divider"></div>
						<div class="checkformText">
							<label class="SquaredCheckbox">
								<input type="checkbox" /><span class="blit"></span> <span class="txt">TEST</span>
							</label>
						</div>
						<div class="checkformText">
							<label class="SquaredCheckbox">
								<input type="checkbox" /><span class="blit"></span> <span class="txt">TEST1111</span>
							</label>
						</div>
						<div class="divider"></div>
						<div class="textform"><input type="text" placeholder="1111" size="50"> <input type="text" placeholder="2222" size="50"></div>
						<div class="textform"><input type="text" placeholder="2222" size="60"> <input type="text" placeholder="2222" size="40"></div>
						<div class="divider"></div>
						<div class="dateform">
							<span class="DateInput first"><input type="text" value="29 November, 2019" size="40" class="datepicker" /></span>
							<span class="DateInput"><input type="text" value="PM 15:30" size="30" /></span>
						</div>
						<div class="divider"></div>
						<div class="etcform">
							<label class="SlideCheckbox answer"><input type="checkbox" checked /><span></span></label>							
						</div>
						<div class="etcform">
							<spn class="text"> 1515151 </spn> <label class="SlideCheckbox answer"><input type="checkbox"  /><span></span></label>
						</div>
						<div class="divider"></div>
						<!-- count -->
						<div class="etcform">
							<a href="#" class="CountButton"><span>+</span></a>
							<a href="#" class="CountButton"><span>-</span></a>
						</div>
						<div class="etcform">
							<a href="#" class="CountButton"><span>+</span></a>
							<span class="text"> 151515 </span>
							<a href="#" class="CountButton"><span>-</span></a>
						</div>
						<!-- //count -->
						<div class="divider"></div>
						<!-- 2등분 -->
						<div class="row">
							<div class="col6">
								<spn class="text"> 1515151 </spn> <label class="SlideCheckbox answer"><input type="checkbox" checked /><span></span></label>
							</div>
							<div class="col6">
								<spn class="text"> YES / NO </spn> <label class="SlideCheckbox answer"><input type="checkbox"  /><span></span></label>
							</div>
						</div>
						<!-- //2등분 -->
					</div>
				</div>
				<div class="DataSetting__bottom">
					<a href="" class="DataSetting__basic_button"><span>cancle</span></a>
					<a href="" class="DataSetting__basic_button"><span>confirm</span></a>
				</div>
			</div>
			<div class="DataSetting__blind" id="DataSetting__blind"></div>
		</div>
		<!-- //DataSetting -->

		<!-- footer -->
		<footer class="Layout__footer"></footer>
		<!-- //footer -->
	</div>
	<!-- javascript -->
	<script type="text/javascript" src="../_public/js/jquery-1.12.4.js"></script>
	<script type="text/javascript" src="../_public/js/jquery-ui.js"></script>
	<script type="text/javascript" src="../_public/vendor/scrollbar/jquery.scrollbar.js"></script>
	<!-- 차트js추가 -->
	<script type="text/javascript" src="../_public/vendor/chartjs/moment.min.js"></script>
	<script type="text/javascript" src="../_public/vendor/chartjs/Chart.js"></script>
	<script type="text/javascript" src="../_public/vendor/chartjs/chartjs-plugin-datalabels.js"></script>
	<script type="text/javascript" src="../_public/vendor/chartjs/Chart.utill.js"></script>
	<script type="text/javascript" src="../_public/vendor/chartjs/Chart.sampleData.js"></script> <!-- Chart.sampleData.js 여기에 샘플데이터있습니다. -->
	<!-- //차트js추가 -->
	<script type="text/javascript" src="../_public/js/ui.js"></script>
	<script>
		$(window).load(function(){

			//chart(canvas id, chart data, chart stepSize, tabCateogoryInit)
			//tabCateogoryInit : 카테고리로 탭있는경우 해당 index 

			//Spot Freight
			ChartUtil.initLineChartMulti('chart1', lineChartData_52, 20, 100, false, 2.5);
			var chart1 = window.ChartUtil.chartList['chart1'];
			//y축 오른쪽 변경 (max, min 수동으로 변경필요) - json 데이터에서 받아서 처리하거나 수동으로설정.
			var chart_ticks = chart1.options.scales.yAxes[1].ticks;
			chart_ticks.max = 1500;
			chart_ticks.min = 900;
            chart_ticks.userCallback = function(value, index, values) {
				return value + "K";
			};
			chart1.update();


			//TD3 FFA
			ChartUtil.initLineChart('chart2', lineChartData_53, 10, false, 2.5);

			//BUNKER PRICE
			ChartUtil.initLineChart('chart3', lineChartData_54, 2500, false, 2.5);
			var chart3 = ChartUtil.chartList['chart3'];
			var chart3_scaleLabel = {
				display : true,
				labelString : '$/day',
				fontColor : ChartUtil.colors.white_op5,
				fontFamily : ChartUtil.font,
				fontSize : 16
			}
			chart3.config.options.scales.yAxes[0].scaleLabel = chart3_scaleLabel;
			chart3.update();

			//Asset price
			ChartUtil.initLineChart('chart4', lineChartData_55, 10, false, 2.5);
			var chart4 = ChartUtil.chartList['chart4'];
			var chart4_scaleLabel = {
				display : true,
				labelString : 'Million USD',
				fontColor : ChartUtil.colors.white_op5,
				fontFamily : ChartUtil.font,
				fontSize : 16
			}
			chart4.config.options.scales.yAxes[0].scaleLabel = chart4_scaleLabel;
			chart4.update();

			//Tanker scrap price
			ChartUtil.initLineChart('chart5', lineChartData_56, 10, false, 2);
			var chart5 = ChartUtil.chartList['chart5'];
			var chart5_scaleLabel = {
				display : true,
				labelString : '$/ltd',
				fontColor : ChartUtil.colors.white_op5,
				fontFamily : ChartUtil.font,
				fontSize : 16
			}
			chart5.config.options.scales.yAxes[0].scaleLabel = chart5_scaleLabel;
			chart5.update();

			// VLCC PREMIUM OVER SUEZMAX QUARTERLY AVERAGE
			ChartUtil.initLineChart('chart6', lineChartData_57, 10, false, 2);

			// BUNKER PRICE ( 마지막 매개변수 - 탭 index 번호 )
			ChartUtil.initLineChart('chart7', lineChartData_58, 50, 0, 2);


			// 200304 스크롤 차트 예시
			ChartUtil.initLineChart('chart1_1', lineChartData_57, 50, false, 2.5);
			ChartUtil.initLineChart('chart1_2', lineChartData_57, 50, false, 2.5);
			ChartUtil.initLineChart('chart3_2', lineChartData_57, 50, false, 2.5);
			ChartUtil.initLineChart('chart6_1', lineChartData_56, 10, false, 2);

			charListSetting($(".chartList"));
		
		});
		//차트 추가될 때 차트 크기조절 함수
        function charListSetting(_list){

			if(_list == null || _list.size() == 0 ) return;
			var browser = window.ui.checkBroswer();
			
			//스크롤이 생길때 각 브라우저의 높이값이 달라서 체크후 마진값으로 조절.
			_list.each(function(index){
				var scrollbarHeight = browser.indexOf("ie") > -1 ? 17 : 10;
				var innerList = $(this).children();
				var items = innerList.children(".inner");
				var charts = innerList.find('canvas');
				if( items.size() <= 1 ){ scrollbarHeight = 0; }
				$(this).css('margin-top', -scrollbarHeight+'px'); //스크롤높이 빼준다.
				
				//맨앞차트 비율만 가지고옴.
				var basicRatio = window.ChartUtil.chartList[charts.eq(0).attr('id')].aspectRatio;
				
				//chart scale 판단 맟 width 값 조정.
				var totalScale = items.size();
				var t_totalScle = 0;
				for(var i =0;i<charts.size();i++){
					var chart = charts.eq(i);
					var scale = chart.data('scale') ? parseFloat(chart.data('scale')) : 1;
					t_totalScle += scale;
					chart.parent(".inner").css({
						'width' : 100*scale+"%"
					})
				}
                totalScale = t_totalScle > totalScale ? t_totalScle : totalScale;
                innerList.css({
                    'transform' :'translateY('+scrollbarHeight+'px)', //스크롤높이만큼 위로 올려준다.
                    'width' : (totalScale * 100 )+"%"
				});
				chartResize(charts, basicRatio);

				$(window).on("resize", function(){
					chartResize(charts, basicRatio);
				});	
			});

			function chartResize(_charts, _basicRatio){
				_charts.width(0);
				_charts.height(0);
				for(var i =0;i<_charts.size();i++){
					var chart = _charts.eq(i);
					var scale = chart.data('scale') ? parseFloat(chart.data('scale')) : 1;

					var id = _charts.eq(i).attr('id');
					//줄어들때 크기가 변하지 않아서 우선 제일 작게 둔 다음 다시 크기맞춤.
					var chart = window.ChartUtil.chartList[id];
					
					if( scale == 2 ) scale = scale*1.0287;
					if( scale == 3 ) scale = scale*1.0287;
					chart.aspectRatio = (_basicRatio * scale);
				
					chart.resize();
					_charts.eq(i).width(chart.width);
					_charts.eq(i).height(chart.height); 
				}
			}
        }		
	</script>
</body>
</html>